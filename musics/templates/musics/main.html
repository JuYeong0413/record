{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}
<!-- Head Section -->
<section class="small-section bg-gray-lighter">
    <div class="relative container align-left">
        
        <div class="row">
            
            <div class="col-md-8">
                <h1 class="hs-line-11 no-transp font-alt mb-20 mb-xs-0">Musics</h1>
                <div class="hs-line-4 font-alt black">
                    Record your music
                </div>
            </div>
            
            <div class="col-md-4 mt-30">
                <div class="mod-breadcrumbs font-alt align-right">
                    <a href="{% url 'main' %}">Home</a>&nbsp;/&nbsp;<a href="{% url 'musics:main' %}">Musics</a>&nbsp;/&nbsp;<span>Main</span>
                </div>
                
            </div>
        </div>
        
    </div>
</section>
<!-- End Head Section -->

<!-- Search Section -->
<section class="small-section" style="padding: 5rem 0 0 0;">
    <div class="container relative">

        <!-- Search -->
        <form class="form-inline form" action="{% url 'musics:search' %}" role="form">
            
            <div class="search-wrap">
                <div class="form-group">
                    <select class="form-control col-md-2" name="option">
                        <option value="title">제목</option>
                        <option value="singer">가수명</option>
                    </select>
                </div>
                <div class="form-group">    
                        <button class="search-button animate" type="submit" title="Start Search">
                            <i class="fa fa-search"></i>
                        </button>
                        <input type="text" class="form-control search-field" placeholder="검색어" name="query">
 
                </div>

            </div>
        </form> 
        <!-- End Search -->
    </div>
</section>
<!-- End Search Section -->

<!-- Section -->
<section class="page-section musictable">
    <div class="container">
        
        <div class="row">
            <div class="col-md-10 col-md-offset-2">
                
                <table class="table table-striped shopping-cart-table">
                    <tr>
                        <th class="hidden-xs">
                            
                        </th>
                        <th>
                            제목
                        </th>
                        <th>
                            가수
                        </th>
                        <th>
                            작성자
                        </th>
                        <th>
                            삭제
                        </th>
                    </tr>
                    
                    {%  for music in musics %}  
                    <tr>
                        <td class="hidden-xs">
                            <img src="{% static 'hyojeong/images/lp.png' %}" alt="" width="50px" height="50px" style="margin-left: auto; margin-right: auto; display: block;"/>
                        </td>
                        <td>
                            <a href="{% url 'musics:show' music.id %}">{{ music.title }}</a>
                        </td>
                        <td>
                            {{ music.singer }}
                        </td>
                        <td>
                            {{ music.writer }}
                        </td>
                        <td>
                            {% if user == music.writer %}
                                <a href="{% url 'musics:delete' music.id %}"><i class="fa fa-times"></i> <span class="hidden-xs">삭제</span></a>
                            {% endif %}
                        </td>
                    </tr> 
                    {% endfor %}
                </table>
                
                <hr />
                <div class="col-sm-8">
                        
                </div>

                <div class="row">
                    
                    <div class="col-sm-4 text align-right">
                        
                        <div>
                            <a href="{% url 'musics:new' %}"><img src="{% static 'bobae/images/music-plus.png' %}" alt="" class="music-plus"/></a>
                        </div>
                        
                    </div>
                </div>

                <!--pagination-->
                <hr class="mb-60 music-main-pagination" />
                <div class="music-paginator-num">
                {% if musics.has_previous %}
                    <a href="?page=1">맨 앞으로</a>
                    <a href="?page={{ musics.previous_page_number }}">이전으로</a>
                {% endif %}            
                    <span>{{ musics.number }}</span>
                    <span> of </span>    
                    <span>{{ musics.paginator.num_pages }}</span>    
                {% if musics.has_next %}
                    <a href="?page={{ musics.next_page_number }}">다음으로</a>
                    <a href="?page={{ musics.paginator.num_page }}">맨 뒤로</a>
                {% endif %}
                </div>
            </div>
        </div>
    
    </div>
</section>
<!-- End Section -->

<!--검색창 아직 수정전이라서 남겨둠-->
<!-- <div>-->
 
    <!-- 곡 검색 -->
    <!--<form action ="{% url 'musics:search' %}">
        <div class="form-group">
            <select class="form-control col-md-2" name="option">
                <option value="title">제목</option>
                <option value="singer">가수명</option>
            </select>
            
            <input type="text" class="form-control col-md-4" placeholder="검색어" name="query">
            <input type="submit" value="검색" class ="btn btn-primary">
        </div>
    </form>
    <br><br>
</div> -->

{% endblock %}
